{% extends "base.html" %}
{% block title %}Simulaciones{% endblock %}

{% block content %}
<h1>Simulaciones</h1>

<h2>{{ titulo_form or "Gestionar Simulación" }}</h2>

<form method="post" action="{{ form_action or '/simulaciones/crear' }}">
    {% if simulacion_editar %}
        <input type="hidden" name="idSimulacion" value="{{ simulacion_editar.idSimulacion }}">
    {% endif %}

    <div class="form-row">
        <label for="interes_id">Interés asociado *</label>
        <select id="interes_id" name="interes_id" required>
            <option value="">-- Seleccione un interés --</option>
            {% for i in intereses %}
            <option value="{{ i.idInteres }}"
                {% if simulacion_editar and simulacion_editar.interes_id == i.idInteres %}selected{% endif %}>
                {{ i.idInteres }} - {{ i.tipo }} ({{ i.tasa }} %)
            </option>
            {% endfor %}
        </select>
    </div>

    <div class="form-row">
        <label for="cuotaMensual">Cuota mensual (COP) *</label>
        <input type="number"
               id="cuotaMensual"
               name="cuotaMensual"
               required
               min="1"
               step="0.01"
               value="{{ simulacion_editar.cuotaMensual if simulacion_editar else '' }}">
    </div>

    <div class="form-row">
        <label for="interesTotal">Interés total (COP) *</label>
        <input type="number"
               id="interesTotal"
               name="interesTotal"
               required
               min="0"
               step="0.01"
               value="{{ simulacion_editar.interesTotal if simulacion_editar else '' }}">
    </div>

    <div class="form-row">
        <label for="saldoFinal">Saldo final (COP) *</label>
        <input type="number"
               id="saldoFinal"
               name="saldoFinal"
               required
               min="0"
               step="0.01"
               value="{{ simulacion_editar.saldoFinal if simulacion_editar else '' }}">
    </div>

    <div class="form-actions">
        <button type="submit">
            {% if simulacion_editar %}Actualizar{% else %}Guardar{% endif %}
        </button>
        <a href="/ui/simulaciones">Limpiar / Nuevo</a>
    </div>
</form>

<hr>

<h2>Lista de Simulaciones</h2>
<table>
    <tr>
        <th>ID</th>
        <th>Interés</th>
        <th>Cuota mensual</th>
        <th>Interés total</th>
        <th>Saldo final</th>
        <th>Acciones</th>
    </tr>
    {% for s in simulaciones %}
    <tr>
        <td>{{ s.idSimulacion }}</td>
        <td>{{ s.interes_id }}</td>
        <td>{{ s.cuotaMensual }}</td>
        <td>{{ s.interesTotal }}</td>
        <td>{{ s.saldoFinal }}</td>
        <td>
            <a href="/ui/simulaciones/{{ s.idSimulacion }}">Editar</a>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}