{% extends "base.html" %}
{% block title %}Usuarios{% endblock %}

{% block content %}
<h1>Usuarios</h1>

<h2>{{ titulo_form or "Gestionar Usuario" }}</h2>

<form method="post" action="{{ form_action or '/usuarios/crear' }}">
    {% if usuario_editar %}
        <input type="hidden" name="idUsuario" value="{{ usuario_editar.idUsuario }}">
    {% endif %}

    <div class="form-row">
        <label for="nombre">Nombre completo *</label>
        <input type="text"
               id="nombre"
               name="nombre"
               required
               maxlength="200"
               value="{{ usuario_editar.nombre if usuario_editar else '' }}">
    </div>

    <div class="form-row">
        <label for="ingresos">Ingresos mensuales (COP) *</label>
        <input type="number"
               id="ingresos"
               name="ingresos"
               required
               min="100000"
               step="0.01"
               value="{{ usuario_editar.ingresos if usuario_editar else '' }}">
    </div>

    <div class="form-row">
        <label for="gastos">Gastos mensuales (COP) *</label>
        <input type="number"
               id="gastos"
               name="gastos"
               required
               min="0"
               step="0.01"
               value="{{ usuario_editar.gastos if usuario_editar else '' }}">
    </div>

    <div class="form-row">
        <label for="correo">Correo electrónico *</label>
        <input type="email"
               id="correo"
               name="correo"
               required
               maxlength="200"
               value="{{ usuario_editar.correo if usuario_editar else '' }}">
    </div>

    <div class="form-row">
        <label for="telefono">Teléfono *</label>
        <input type="tel"
               id="telefono"
               name="telefono"
               required
               maxlength="20"
               value="{{ usuario_editar.telefono if usuario_editar else '' }}">
    </div>

    <div class="form-actions">
        <button type="submit">
            {% if usuario_editar %}Actualizar{% else %}Guardar{% endif %}
        </button>
        <a href="/ui/usuarios">Limpiar / Nuevo</a>
    </div>
</form>

<hr>

<h2>Lista de Usuarios</h2>
<table>
    <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Ingresos</th>
        <th>Gastos</th>
        <th>Correo</th>
        <th>Teléfono</th>
        <th>Acciones</th>
    </tr>
    {% for u in usuarios %}
    <tr>
        <td>{{ u.idUsuario }}</td>
        <td>{{ u.nombre }}</td>
        <td>{{ u.ingresos }}</td>
        <td>{{ u.gastos }}</td>
        <td>{{ u.correo }}</td>
        <td>{{ u.telefono }}</td>
        <td>
            <a href="/ui/usuarios/{{ u.idUsuario }}">Editar</a>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}